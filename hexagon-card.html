<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../proportional-height-box/proportional-height-box.html">
<!--
`hexagon-card`
A Hexagon-shaped card

Originally based upon the code by Brenna O'Brien at https://github.com/brenna/csshexagon (Brenna's website is http://brennaobrien.com)

Subsequently refactored using http://codepen.io/4dgaurav/pen/KDbBe/ by Geoffrey Crofte (http://twitter.com/geoffrey_crofte)

@demo demo/index.html
-->

<dom-module id="hexagon-card">
    <template>
        <style>
            :host {
                display: block;
                overflow: hidden;
            }
            ::content {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;
            }

            #hexa.hexa, .hex1, .hex2, .hex3, .hex4 {
                margin: 0 auto;
                transform-origin: 50% 50%;
                overflow: hidden;
                width: 100%;
                height: 100%;
            }
            #hexa.hexa {
                height: 86.2%;
                will-change: transform;
            }
            .hex1 {
                transform: rotate(-60deg);
            }
            .hex2 {
                transform: rotate(-60deg);
            }
            .hex3 {
                will-change: transform;
                height: 116%;
                transform-origin: 50% 43.1%;
            }
            .hex4 {
                background-size: cover;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        </style>

        <proportional-height-box width="100" height="100">
            <div id="hexa" class="hexa">
                <div class="hex1">
                    <div class="hex2">
                        <div id="bgRotater" class="hex3">
                            <div id="background" class="hex4">
                                <content></content>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </proportional-height-box>
    </template>

    <script>
        (function() {
            'use strict';

            Polymer({

                is: 'hexagon-card',

                properties: {
                    /* Background color of hexagon interior */
                    bgColor: {
                        type: String,
                        value: '#eee',
                        observer: '_bgColorChanged'
                    },
                    /* Background image for hexagon interior */
                    bgImage: {
                        type: String,
                        value: '',
                        observer: '_bgImageChanged'
                    },
                    /* Number of degrees to rotate the hexagon */
                    rotate: {
                        type: Number,
                        value: 0,
                        observer: '_rotateChanged'
                    }
                },

                /* Set the background when the bgColor attribute is changed */
                _bgColorChanged: function(newValue, oldValue) {
                    this.$.background.style.backgroundColor = newValue;
                },
                /* Set the background when the bgImage attribute is changed */
                _bgImageChanged: function(newValue, oldValue) {
                    this.$.background.style.backgroundImage = `url(${newValue})`;
                },
                
                /* Rotate the hexagon when the rotate attribute is changed */
                _rotateChanged: function(newValue, oldValue) {
                    this.$.hexa.style.transform = `rotate(${newValue + 120}deg)`;
                    this.$.bgRotater.style.transform = `rotate(${-newValue}deg) translateY(-7%)`;
                }

            });

        }());
    </script>
</dom-module>
